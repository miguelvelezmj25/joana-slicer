<html><body><pre><code><div>  /*</div><div>   *  Copyright 2016 Patrick Favre-Bulle</div><div>   *</div><div>   *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</div><div>   *  you may not use this file except in compliance with the License.</div><div>   *  You may obtain a copy of the License at</div><div>   *</div><div>   *      http://www.apache.org/licenses/LICENSE-2.0</div><div>   *</div><div>   * Unless required by applicable law or agreed to in writing, software</div><div>   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</div><div>   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div>   * See the License for the specific language governing permissions and</div><div>   * limitations under the License.</div><div>   */</div><div>  </div><div>  package at.favre.tools.dconvert.converters;</div><div>  </div><div>  import at.favre.tools.dconvert.arg.Arguments;</div><div>  import at.favre.tools.dconvert.arg.ImageType;</div><div>  import at.favre.tools.dconvert.converters.descriptors.PostfixDescriptor;</div><div>  import at.favre.tools.dconvert.util.MiscUtil;</div><div>  </div><div>  import java.awt.*;</div><div>  import java.io.File;</div><div>  import java.util.ArrayList;</div><div>  import java.util.List;</div><div>  </div><div>  /** Converts and creates css image-set style images */</div><div>* public class WebConverter extends APlatformConverter&lt;PostfixDescriptor&gt; {</div><div>      public static final String ROOT_FOLDER = &quot;img&quot;;</div><div>      private static final String WEB_FOLDER_NAME = &quot;web&quot;;</div><div>  </div><div>      public static List&lt;PostfixDescriptor&gt; getWebDescriptors() {</div><div>*         List&lt;PostfixDescriptor&gt; list = new ArrayList&lt;PostfixDescriptor&gt;();</div><div>*         list.add(new PostfixDescriptor(1, &quot;1x&quot;, &quot;-1x&quot;));</div><div>*         list.add(new PostfixDescriptor(2f, &quot;2x&quot;, &quot;-2x&quot;));</div><div>*         return list;</div><div>      }</div><div>  </div><div>      @Override</div><div>      public List&lt;PostfixDescriptor&gt; usedOutputDensities(Arguments arguments) {</div><div>*         return getWebDescriptors();</div><div>      }</div><div>  </div><div>      @Override</div><div>      public PostfixDescriptor originalOutputDensities() {</div><div>*         return new PostfixDescriptor(1, &quot;1x&quot;, &quot;-1x&quot;);</div><div>      }</div><div>  </div><div>      @Override</div><div>      public String getConverterName() {</div><div>*         return &quot;web-converter&quot;;</div><div>      }</div><div>  </div><div>      @Override</div><div>      public File createMainSubFolder(</div><div>              File destinationFolder, String targetImageFileName, Arguments arguments) {</div><div>*         if (arguments.platform.size() &gt; 1) {</div><div>*             destinationFolder =</div><div>*                     MiscUtil.createAndCheckFolder(</div><div>*                             new File(destinationFolder, WEB_FOLDER_NAME).getAbsolutePath(), arguments.dryRun);</div><div>          }</div><div>*         return MiscUtil.createAndCheckFolder(</div><div>*                 new File(destinationFolder, ROOT_FOLDER).getAbsolutePath(), arguments.dryRun);</div><div>      }</div><div>  </div><div>      @Override</div><div>      public File createFolderForOutputFile(</div><div>              File mainSubFolder,</div><div>              PostfixDescriptor density,</div><div>              Dimension dimension,</div><div>              String targetFileName,</div><div>              Arguments arguments) {</div><div>*         return mainSubFolder;</div><div>      }</div><div>  </div><div>      @Override</div><div>      public String createDestinationFileNameWithoutExtension(</div><div>              PostfixDescriptor density, Dimension dimension, String targetFileName, Arguments arguments) {</div><div>*         return targetFileName + density.postFix;</div><div>      }</div><div>  </div><div>      @Override</div><div>      public void onPreExecute(</div><div>              File dstFolder,</div><div>              String targetFileName,</div><div>              List&lt;PostfixDescriptor&gt; densityDescriptions,</div><div>              ImageType imageType,</div><div>              Arguments arguments)</div><div>              throws Exception {}</div><div>  </div><div>      @Override</div><div>      public void onPostExecute(Arguments arguments) {}</div><div>  </div><div>      @Override</div><div>      public void clean(Arguments arguments) {</div><div>          if (arguments.platform.size() == 1) {</div><div>              MiscUtil.deleteFolder(new File(arguments.dst, ROOT_FOLDER));</div><div>          } else {</div><div>              MiscUtil.deleteFolder(new File(new File(arguments.dst, WEB_FOLDER_NAME), ROOT_FOLDER));</div><div>          }</div><div>      }</div><div>  }</div></code></pre></body></html>