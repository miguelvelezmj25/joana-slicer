


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > OperationFailureException</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
    @import "../../.css/highlight-idea.css";
  </style>
  <script type="text/javascript" src="../../.js/highlight.pack.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.sleepycat.je</a>
</div>

<h1>Coverage Summary for Class: OperationFailureException (com.sleepycat.je)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">OperationFailureException</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<div class="sourceCode" id="sourceCode"><i class="no-highlight">1</i>&nbsp;/*-
<i class="no-highlight">2</i>&nbsp; * Copyright (C) 2002, 2017, Oracle and/or its affiliates. All rights reserved.
<i class="no-highlight">3</i>&nbsp; *
<i class="no-highlight">4</i>&nbsp; * This file was distributed by Oracle as part of a version of Oracle Berkeley
<i class="no-highlight">5</i>&nbsp; * DB Java Edition made available at:
<i class="no-highlight">6</i>&nbsp; *
<i class="no-highlight">7</i>&nbsp; * http://www.oracle.com/technetwork/database/database-technologies/berkeleydb/downloads/index.html
<i class="no-highlight">8</i>&nbsp; *
<i class="no-highlight">9</i>&nbsp; * Please see the LICENSE file included in the top-level directory of the
<i class="no-highlight">10</i>&nbsp; * appropriate version of Oracle Berkeley DB Java Edition for a copy of the
<i class="no-highlight">11</i>&nbsp; * license and additional information.
<i class="no-highlight">12</i>&nbsp; */
<i class="no-highlight">13</i>&nbsp;
<i class="no-highlight">14</i>&nbsp;package com.sleepycat.je;
<i class="no-highlight">15</i>&nbsp;
<i class="no-highlight">16</i>&nbsp;import com.sleepycat.je.txn.Locker;
<i class="no-highlight">17</i>&nbsp;
<i class="no-highlight">18</i>&nbsp;/**
<i class="no-highlight">19</i>&nbsp; * Indicates that a failure has occurred that impacts the current operation
<i class="no-highlight">20</i>&nbsp; * and/or transaction.  For failures that impact the environment as a whole,
<i class="no-highlight">21</i>&nbsp; * see {@link EnvironmentFailureException}.  For an overview of all exceptions
<i class="no-highlight">22</i>&nbsp; * thrown by JE, see {@link DatabaseException}.
<i class="no-highlight">23</i>&nbsp; *
<i class="no-highlight">24</i>&nbsp; * &lt;p&gt;If an explicit transaction applies to a method which threw this
<i class="no-highlight">25</i>&nbsp; * exception, the exception may indicate that {@link Transaction#abort} must be
<i class="no-highlight">26</i>&nbsp; * called, depending on the nature of the failure.  A transaction is applicable
<i class="no-highlight">27</i>&nbsp; * to a method call in two cases.&lt;/p&gt;
<i class="no-highlight">28</i>&nbsp; * &lt;ol&gt;
<i class="no-highlight">29</i>&nbsp; * &lt;li&gt;When an explicit (non-null) {@code Transaction} instance is specified.
<i class="no-highlight">30</i>&nbsp; * This applies when the {@code Transaction} is passed as a parameter to the
<i class="no-highlight">31</i>&nbsp; * method that throws the exception, or when the {@code Transaction} is passed
<i class="no-highlight">32</i>&nbsp; * to {@link Database#openCursor} and a {@code Cursor} method throws the
<i class="no-highlight">33</i>&nbsp; * exception.
<i class="no-highlight">34</i>&nbsp; * &lt;/li&gt;
<i class="no-highlight">35</i>&nbsp; * &lt;li&gt;When a per-thread {@code Transaction} applies to the method that throws
<i class="no-highlight">36</i>&nbsp; * the exception.  Per-thread transactions apply when using {@link
<i class="no-highlight">37</i>&nbsp; * com.sleepycat.collections persistent collections} with {@link
<i class="no-highlight">38</i>&nbsp; * com.sleepycat.collections.CurrentTransaction} or {@link
<i class="no-highlight">39</i>&nbsp; * com.sleepycat.collections.TransactionRunner}, or when using XA transactions
<i class="no-highlight">40</i>&nbsp; * with {@link XAEnvironment}.
<i class="no-highlight">41</i>&nbsp; * &lt;/li&gt;
<i class="no-highlight">42</i>&nbsp; * &lt;/ol&gt;
<i class="no-highlight">43</i>&nbsp; *
<i class="no-highlight">44</i>&nbsp; * &lt;p&gt;When a transaction is applicable to a method call, the application should
<i class="no-highlight">45</i>&nbsp; * catch {@code OperationFailureException} and then call {@link
<i class="no-highlight">46</i>&nbsp; * Transaction#isValid}.  If {@code false} is returned, all {@code Cursor}
<i class="no-highlight">47</i>&nbsp; * instances that were created with the transaction must be closed and then
<i class="no-highlight">48</i>&nbsp; * {@link Transaction#abort} must be called.  Also note that {@link
<i class="no-highlight">49</i>&nbsp; * Transaction#isValid} may be called at any time, not just during exception
<i class="no-highlight">50</i>&nbsp; * handling.&lt;/p&gt;
<i class="no-highlight">51</i>&nbsp; *
<i class="no-highlight">52</i>&nbsp; * &lt;p&gt;The use of the {@link Transaction#isValid} method allows JE to determine
<i class="no-highlight">53</i>&nbsp; * dynamically whether the failure requires an abort or not, and allows for
<i class="no-highlight">54</i>&nbsp; * this determination to change in future releases. Over time, internal
<i class="no-highlight">55</i>&nbsp; * improvements to error handling may allow more error conditions to be handled
<i class="no-highlight">56</i>&nbsp; * without invalidating the {@code Transaction}.&lt;/p&gt;
<i class="no-highlight">57</i>&nbsp; *
<i class="no-highlight">58</i>&nbsp; * &lt;p&gt;The specific handling that is necessary for an {@code
<i class="no-highlight">59</i>&nbsp; * OperationFailureException} depends on the specific subclass thrown.  See the
<i class="no-highlight">60</i>&nbsp; * javadoc for each method for information on which methods throw which {@code
<i class="no-highlight">61</i>&nbsp; * OperationFailureException}s and why.&lt;/p&gt;
<i class="no-highlight">62</i>&nbsp; *
<i class="no-highlight">63</i>&nbsp; * &lt;p&gt;If {@link Transaction#abort} is not called after an {@code
<i class="no-highlight">64</i>&nbsp; * OperationFailureException} invalidates the {@code Transaction}, all
<i class="no-highlight">65</i>&nbsp; * subsequent method calls using the {@code Transaction} will throw the same
<i class="no-highlight">66</i>&nbsp; * exception.  This provides more than one opportunity to catch and handle the
<i class="no-highlight">67</i>&nbsp; * specific exception subclass that caused the failure.&lt;/p&gt;
<i class="no-highlight">68</i>&nbsp; *
<i class="no-highlight">69</i>&nbsp; * &lt;p&gt;{@code OperationFailureException} is also thrown by methods where no
<i class="no-highlight">70</i>&nbsp; * transaction applies. In most cases the action required to handle the
<i class="no-highlight">71</i>&nbsp; * exception is the same as with a transaction, although of course no abort is
<i class="no-highlight">72</i>&nbsp; * necessary.&lt;/p&gt;
<i class="no-highlight">73</i>&nbsp; *
<i class="no-highlight">74</i>&nbsp; * &lt;p&gt;However, please be aware that for some operations on a non-transactional
<i class="no-highlight">75</i>&nbsp; * {@code Database} or {@code EntityStore}, an {@code
<i class="no-highlight">76</i>&nbsp; * OperationFailureException} may cause data corruption.  For example, see
<i class="no-highlight">77</i>&nbsp; * {@link SecondaryReferenceException}.&lt;/p&gt;
<i class="no-highlight">78</i>&nbsp; *
<i class="no-highlight">79</i>&nbsp; * &lt;p&gt;There are two groups of operation failure subclasses worth noting since
<i class="no-highlight">80</i>&nbsp; * they apply to many methods: read operation failures and write operation
<i class="no-highlight">81</i>&nbsp; * failures.  These are described below.&lt;/p&gt;
<i class="no-highlight">82</i>&nbsp; *
<i class="no-highlight">83</i>&nbsp; * &lt;a name=&quot;readFailures&quot;&gt;&lt;h3&gt;Read Operation Failures&lt;/h3&gt;&lt;/a&gt;
<i class="no-highlight">84</i>&nbsp; *
<i class="no-highlight">85</i>&nbsp; * &lt;p&gt;Read operations are all those performed by the {@code get} family of
<i class="no-highlight">86</i>&nbsp; * methods, for example, {@link Database#get Database.get}, {@link
<i class="no-highlight">87</i>&nbsp; * Cursor#getNext Cursor.getNext}, {@link com.sleepycat.persist.EntityIndex#get
<i class="no-highlight">88</i>&nbsp; * EntityIndex.get}, {@link com.sleepycat.persist.EntityCursor#next
<i class="no-highlight">89</i>&nbsp; * EntityCursor.next}, {@link com.sleepycat.collections.StoredMap#get
<i class="no-highlight">90</i>&nbsp; * StoredMap.get}, and {@link ForwardCursor#getNext ForwardCursor.getNext}.
<i class="no-highlight">91</i>&nbsp; * These methods may cause the following operation
<i class="no-highlight">92</i>&nbsp; * failures.&lt;/p&gt;
<i class="no-highlight">93</i>&nbsp; *
<i class="no-highlight">94</i>&nbsp; * &lt;ul&gt;
<i class="no-highlight">95</i>&nbsp; * &lt;li&gt;{@link OperationFailureException} is the superclass of all read
<i class="no-highlight">96</i>&nbsp; * operation failures.&lt;/li&gt;
<i class="no-highlight">97</i>&nbsp; *   &lt;ul&gt;
<i class="no-highlight">98</i>&nbsp; *   &lt;li&gt;{@link LockConflictException} is thrown if a lock conflict prevents
<i class="no-highlight">99</i>&nbsp; *   the operation from completing.  A read operation may be blocked by another
<i class="no-highlight">100</i>&nbsp; *   locker (transaction or non-transactional cursor) that holds a write lock
<i class="no-highlight">101</i>&nbsp; *   on the record.&lt;/li&gt;
<i class="no-highlight">102</i>&nbsp; *
<i class="no-highlight">103</i>&nbsp; *     &lt;ul&gt;
<i class="no-highlight">104</i>&nbsp; *     &lt;li&gt;{@link com.sleepycat.je.rep.LockPreemptedException} is a subclass
<i class="no-highlight">105</i>&nbsp; *     of {@code LockConflictException} that is thrown in a replicated
<i class="no-highlight">106</i>&nbsp; *     environment on the Replica node, when the Master node has changed a
<i class="no-highlight">107</i>&nbsp; *     record that was previously locked by the reading transaction or
<i class="no-highlight">108</i>&nbsp; *     cursor.&lt;/li&gt;
<i class="no-highlight">109</i>&nbsp; *     &lt;/ul&gt;
<i class="no-highlight">110</i>&nbsp; *
<i class="no-highlight">111</i>&nbsp; *   &lt;li&gt;{@link SecondaryIntegrityException} is thrown if a primary-secondary
<i class="no-highlight">112</i>&nbsp; *   relationship integrity problem is detected while reading a primary
<i class="no-highlight">113</i>&nbsp; *   database record via a secondary index.&lt;/li&gt;
<i class="no-highlight">114</i>&nbsp; *
<i class="no-highlight">115</i>&nbsp; *   &lt;li&gt;{@link com.sleepycat.je.rep.DatabasePreemptedException} is thrown in a
<i class="no-highlight">116</i>&nbsp; *   replicated environment on the Replica node, when the Master node has
<i class="no-highlight">117</i>&nbsp; *   truncated, removed or renamed the database.&lt;/li&gt;
<i class="no-highlight">118</i>&nbsp; *
<i class="no-highlight">119</i>&nbsp; *   &lt;li&gt;Other {@link OperationFailureException} subclasses may be thrown if
<i class="no-highlight">120</i>&nbsp; *   such an exception was thrown earlier and caused the transaction to be
<i class="no-highlight">121</i>&nbsp; *   invalidated.&lt;/li&gt;
<i class="no-highlight">122</i>&nbsp; *   &lt;/ul&gt;
<i class="no-highlight">123</i>&nbsp; * &lt;/ul&gt;
<i class="no-highlight">124</i>&nbsp; *
<i class="no-highlight">125</i>&nbsp; * &lt;a name=&quot;writeFailures&quot;&gt;&lt;h3&gt;Write Operation Failures&lt;/h3&gt;&lt;/a&gt;
<i class="no-highlight">126</i>&nbsp; *
<i class="no-highlight">127</i>&nbsp; * &lt;p&gt;Write operations are all those performed by the {@code put} and {@code
<i class="no-highlight">128</i>&nbsp; * delete} families of methods, for example, {@link Database#put Database.put},
<i class="no-highlight">129</i>&nbsp; * {@link Cursor#delete Cursor.delete}, {@link
<i class="no-highlight">130</i>&nbsp; * com.sleepycat.persist.PrimaryIndex#put PrimaryIndex.put}, {@link
<i class="no-highlight">131</i>&nbsp; * com.sleepycat.persist.EntityCursor#delete EntityCursor.delete} and {@link
<i class="no-highlight">132</i>&nbsp; * com.sleepycat.collections.StoredMap#put StoredMap.put}.  These methods may
<i class="no-highlight">133</i>&nbsp; * cause the following operation failures, although certain failures are only
<i class="no-highlight">134</i>&nbsp; * caused by {@code put} methods and others only by {@code delete} methods, as
<i class="no-highlight">135</i>&nbsp; * noted below.&lt;/p&gt;
<i class="no-highlight">136</i>&nbsp; *
<i class="no-highlight">137</i>&nbsp; * &lt;ul&gt;
<i class="no-highlight">138</i>&nbsp; * &lt;li&gt;{@link OperationFailureException} is the superclass of all write
<i class="no-highlight">139</i>&nbsp; * operation failures.&lt;/li&gt;
<i class="no-highlight">140</i>&nbsp; *
<i class="no-highlight">141</i>&nbsp; *   &lt;ul&gt;
<i class="no-highlight">142</i>&nbsp; *   &lt;li&gt;{@link LockConflictException} is thrown if a lock conflict prevents
<i class="no-highlight">143</i>&nbsp; *   the operation from completing.  A write operation may be blocked by
<i class="no-highlight">144</i>&nbsp; *   another locker (transaction or non-transactional cursor) that holds a read
<i class="no-highlight">145</i>&nbsp; *   or write lock on the record.&lt;/li&gt;
<i class="no-highlight">146</i>&nbsp; *
<i class="no-highlight">147</i>&nbsp; *   &lt;li&gt;{@link DiskLimitException} is thrown if a disk limit has been
<i class="no-highlight">148</i>&nbsp; *   violated and this prevents the operation from completing.&lt;/p&gt;
<i class="no-highlight">149</i>&nbsp; *
<i class="no-highlight">150</i>&nbsp; *   &lt;li&gt;{@link SecondaryConstraintException} is the superclass of all
<i class="no-highlight">151</i>&nbsp; *   exceptions thrown when a write operation fails because of a secondary
<i class="no-highlight">152</i>&nbsp; *   constraint.&lt;/li&gt;
<i class="no-highlight">153</i>&nbsp; *
<i class="no-highlight">154</i>&nbsp; *     &lt;ul&gt;
<i class="no-highlight">155</i>&nbsp; *     &lt;li&gt;{@link ForeignConstraintException} is thrown when an attempt to
<i class="no-highlight">156</i>&nbsp; *     write a primary database record would insert a secondary record with a
<i class="no-highlight">157</i>&nbsp; *     key that does not exist in a foreign key database, when the secondary
<i class="no-highlight">158</i>&nbsp; *     key is configured as a foreign key.  This exception is only thrown by
<i class="no-highlight">159</i>&nbsp; *     {@code put} methods.&lt;/li&gt;
<i class="no-highlight">160</i>&nbsp; *
<i class="no-highlight">161</i>&nbsp; *     &lt;li&gt;{@link UniqueConstraintException} is thrown when an attempt to write
<i class="no-highlight">162</i>&nbsp; *     a primary database record would insert a secondary record with a
<i class="no-highlight">163</i>&nbsp; *     duplicate key, for secondaries that represent one-to-one and one-to-many
<i class="no-highlight">164</i>&nbsp; *     relationships.  This exception is only thrown by {@code put}
<i class="no-highlight">165</i>&nbsp; *     methods.&lt;/li&gt;
<i class="no-highlight">166</i>&nbsp; *
<i class="no-highlight">167</i>&nbsp; *     &lt;li&gt;{@link DeleteConstraintException} is thrown when an attempt is made
<i class="no-highlight">168</i>&nbsp; *     to delete a key from a foreign key database, when that key is referenced
<i class="no-highlight">169</i>&nbsp; *     by a secondary database, and the secondary is configured to cause an
<i class="no-highlight">170</i>&nbsp; *     abort in this situation.  This exception is only thrown by {@code
<i class="no-highlight">171</i>&nbsp; *     delete} methods.&lt;/li&gt;
<i class="no-highlight">172</i>&nbsp; *     &lt;/ul&gt;
<i class="no-highlight">173</i>&nbsp; *
<i class="no-highlight">174</i>&nbsp; *   &lt;li&gt;{@link SecondaryIntegrityException} is thrown if a primary-secondary
<i class="no-highlight">175</i>&nbsp; *   relationship integrity problem is detected while writing a record in a
<i class="no-highlight">176</i>&nbsp; *   primary database that has one or more secondary indices.
<i class="no-highlight">177</i>&nbsp; *
<i class="no-highlight">178</i>&nbsp; *   &lt;li&gt;{@link com.sleepycat.je.rep.DatabasePreemptedException} is thrown in a
<i class="no-highlight">179</i>&nbsp; *   replicated environment on a Replica node, when the Master node has
<i class="no-highlight">180</i>&nbsp; *   truncated, removed or renamed the database.&lt;/li&gt;
<i class="no-highlight">181</i>&nbsp; *
<i class="no-highlight">182</i>&nbsp; *   &lt;li&gt;{@link com.sleepycat.je.rep.ReplicaWriteException} is always thrown in
<i class="no-highlight">183</i>&nbsp; *   a replicated environment on a Replica node, since write operations are not
<i class="no-highlight">184</i>&nbsp; *   allowed on a Replica.&lt;/li&gt;
<i class="no-highlight">185</i>&nbsp; *
<i class="no-highlight">186</i>&nbsp; *   &lt;li&gt;Other {@link OperationFailureException} subclasses may be thrown if
<i class="no-highlight">187</i>&nbsp; *   such an exception was thrown earlier and caused the transaction to be
<i class="no-highlight">188</i>&nbsp; *   invalidated.&lt;/li&gt;
<i class="no-highlight">189</i>&nbsp; *   &lt;/ul&gt;
<i class="no-highlight">190</i>&nbsp; * &lt;/ul&gt;
<i class="no-highlight">191</i>&nbsp; *
<i class="no-highlight">192</i>&nbsp; * @since 4.0
<i class="no-highlight">193</i>&nbsp; */
<b class="nc"><i class="no-highlight">194</i>&nbsp;public abstract class OperationFailureException extends DatabaseException {</b>
<i class="no-highlight">195</i>&nbsp;
<i class="no-highlight">196</i>&nbsp;    private static final long serialVersionUID = 1;
<i class="no-highlight">197</i>&nbsp;
<i class="no-highlight">198</i>&nbsp;    /**
<i class="no-highlight">199</i>&nbsp;     * For internal use only.
<i class="no-highlight">200</i>&nbsp;     * @hidden
<i class="no-highlight">201</i>&nbsp;     */
<i class="no-highlight">202</i>&nbsp;    public OperationFailureException(Locker locker,
<i class="no-highlight">203</i>&nbsp;                                     boolean abortOnly,
<i class="no-highlight">204</i>&nbsp;                                     String message,
<i class="no-highlight">205</i>&nbsp;                                     Throwable cause) {
<b class="nc"><i class="no-highlight">206</i>&nbsp;        super(message, cause);</b>
<b class="nc"><i class="no-highlight">207</i>&nbsp;        if (abortOnly) {</b>
<b class="nc"><i class="no-highlight">208</i>&nbsp;            assert locker != null;</b>
<b class="nc"><i class="no-highlight">209</i>&nbsp;            locker.setOnlyAbortable(this);</b>
<i class="no-highlight">210</i>&nbsp;        }
<b class="nc"><i class="no-highlight">211</i>&nbsp;    }</b>
<i class="no-highlight">212</i>&nbsp;
<i class="no-highlight">213</i>&nbsp;    /**
<i class="no-highlight">214</i>&nbsp;     * For internal use only.
<i class="no-highlight">215</i>&nbsp;     * @hidden
<i class="no-highlight">216</i>&nbsp;     * Only for use by bind/collection/persist exception subclasses.
<i class="no-highlight">217</i>&nbsp;     */
<i class="no-highlight">218</i>&nbsp;    public OperationFailureException(String message) {
<b class="nc"><i class="no-highlight">219</i>&nbsp;        this(null /*locker*/, false /*abortOnly*/, message, null /*cause*/);</b>
<b class="nc"><i class="no-highlight">220</i>&nbsp;    }</b>
<i class="no-highlight">221</i>&nbsp;
<i class="no-highlight">222</i>&nbsp;    /**
<i class="no-highlight">223</i>&nbsp;     * For internal use only.
<i class="no-highlight">224</i>&nbsp;     * @hidden
<i class="no-highlight">225</i>&nbsp;     * Only for use by wrapSelf methods.
<i class="no-highlight">226</i>&nbsp;     */
<i class="no-highlight">227</i>&nbsp;    protected OperationFailureException(String message,
<i class="no-highlight">228</i>&nbsp;                                        OperationFailureException cause) {
<b class="nc"><i class="no-highlight">229</i>&nbsp;        super(message, cause);</b>
<b class="nc"><i class="no-highlight">230</i>&nbsp;    }</b>
<i class="no-highlight">231</i>&nbsp;
<i class="no-highlight">232</i>&nbsp;    /**
<i class="no-highlight">233</i>&nbsp;     * For internal use only.
<i class="no-highlight">234</i>&nbsp;     * @hidden
<i class="no-highlight">235</i>&nbsp;     * Must be implemented by every concrete subclass to return an instance of
<i class="no-highlight">236</i>&nbsp;     * its own class, constructed with the given msg and this exception as
<i class="no-highlight">237</i>&nbsp;     * parameters, e.g.: return new MyClass(msg, this);
<i class="no-highlight">238</i>&nbsp;     */
<i class="no-highlight">239</i>&nbsp;    public abstract OperationFailureException wrapSelf(String msg);
<i class="no-highlight">240</i>&nbsp;}
</div>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
        var codeBlock = document.getElementById('sourceCode');

        if (codeBlock) {
            hljs.highlightBlock(codeBlock);
        }
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2021-04-19 13:44</div>
</div>
</body>
</html>
